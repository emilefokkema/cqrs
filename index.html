<html>
<body>
	<script type="text/javascript" src="index.js"></script>
	<script>
	(async function(){
		var state = await CQRS.create('sampleState.js', 2);
		
		state.setStep(2).catch(() => state.setStep(4));
		//state.setStep(4);

		var cancellationToken = new CQRS.CancellationToken();
		
		state.getStep(2, cancellationToken);
		cancellationToken.cancel();
		console.log(`got result `, await Promise.all([state.getStep(3), state.getStep(4), state.getStep(5)]));
	})()
	</script>
</body>
</html>